/*! For license information please see SpreedlyUI.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.SpreedlyComponent=t(require("React")):e.SpreedlyComponent=t(e.React)}(this,(e=>(()=>{"use strict";var t={626:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,'.spreedlyModalSection,\n.achModalSection {\n  padding: 10px;\n  font-family: sans-serif;\n}\n\n.spreedlyModalTitle,\n.achModalTitle {\n  font-size: 20px;\n  font-weight: 500;\n  text-transform: uppercase;\n  margin: 0px;\n  padding-bottom: 6px;\n}\n\n.spreedlyCardDetailsSection,\n.achCardDetailsSection {\n  border: 1px solid #cccccc;\n  border-radius: 5px;\n  padding: 10px;\n}\n\n.spreedlyFormLabel,\n.achFormLabel {\n  font-weight: 400;\n  font-size: 16px;\n  margin: 10px 0 10px;\n  display: block;\n}\n\n.saveCCFormLabel {\n  font-weight: 400;\n  font-size: 16px;\n  margin: 10px 0 10px;\n  display: block;\n}\n\n\n.spreedlyFormInput,\n.achFormInput {\n  width: 98.6%;\n  border: 1px solid #cccccc;\n  border-radius: 5px;\n  padding: 4px;\n  outline: none;\n  height: 30px;\n  margin-bottom: 15px;\n  box-sizing: content-box !important;\n}\n\n.spreedly-saveCCNameSection {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  column-gap: 10px;\n  max-height: 95px;\n  margin-right: 5px;\n}\n\n.spreedly-achNameSection {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  column-gap: 10px;\n  max-height: 95px;\n  margin-right: 5px;\n}\n\n.spreedlyExpiryDateCVVSection {\n  height: 200px;\n}\n.spreedlyExpiryDateCVVSection input {\n  width: 100px;\n}\n\n.formActionButtons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 20px;\n  align-items: center;\n  margin: 15px 0;\n}\n\n.btnPaymentSubmit,\n.btnPaymentCancel {\n  font-size: 14px;\n  padding: 5px;\n  text-transform: uppercase;\n  border: 1px solid black;\n}\n\n.requiredField {\n  margin-left: 4px;\n  color: rgb(202, 18, 18);\n}\n.spreedlyExpirationDateSection {\n  display: flex;\n  gap: 6px;\n}\n\n.achAccountType{\n  height: 30px;\n                        border-radius: 5px;\n                        border: 1px solid #cccccc;\n                        padding: 4px;\n                        margin-bottom: 15px;\n                        min-width: 85px;\n                        width:210px;\n}\n\n@media only screen and (min-width: 764px) {\n  .spreedlyExpiryDateCVVSection {\n    display: flex;\n    gap: 20px;\n    height: 100px;\n  }\n\n  .spreedlyExpiryDateCVVErrorSection {\n    display: flex;\n    gap: 20px;\n  }\n\n  .spreedlyExpiryDateCVVErrorSection .spreedlyCVVErrorField {\n    margin-left: 20px;\n  }\n}\n\n\n/* Spreedly Saved CC */\n.spreedlyAccordion {\n  background-color: #eee;\n  color: #444;\n  cursor: pointer;\n  padding: 18px;\n  width: 100%;\n  border: none;\n  text-align: left;\n  outline: none;\n  font-size: 15px;\n  transition: 0.4s; \n  flex-grow: 1;\n  position: relative;\n}\n\n\n\n.active, .spreedlyAccordion:hover {\n  background-color: #ccc; \n}\n\n/* .panel {\n  padding: 0 18px;\n  display: none;\n  background-color: white;\n  overflow: hidden;\n} */\n.panel {\n  padding: 0 18px;\n  background-color: white;\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.2s ease-out;\n}.spreedlyAccordion:after {\n  content: \'\\02795\'; /* Unicode character for "plus" sign (+) */\n  font-size: 13px;\n  color: #777;\n  float: right;\n  margin-left: 5px;\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.active:after {\n  content: "\\2796"; /* Unicode character for "minus" sign (-) */\n}\n\n.deleteCardButton {\n  background: none;\n  border: none;\n  color:  #030303;\n  font-size: 18px;\n  padding: 0 16px;\n  cursor: pointer;\n  height: 100%;\n  float: right;\n  display: flex;\n  align-items: center;\n}\n\n.active,\n.deleteCardButton:hover {\n  background-color: #ccc; \n}\n\n.active,\n.accordion-header-row:hover {\n  background-color: #ccc; \n}\n\n.accordion-header-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 4px;\n  background-color: #eee;\n  color: #444;\n}\n\n.spreedlyErrorText {\n  color: red;\n  font-size: 0.875rem;\n  margin-top: 4px;\n}\n\n.modal-container {\n  display: flex;\n  justify-content: center;\n  padding: 16px;\n}\n\n.modal-content {\n  background-color: transparent;         \n  padding: 24px;                         \n  border-radius: 5px;                 \n  min-width: 400px;  \n  max-width: 700px;\n  width: 100%;\n  text-align: center;\n  font-family: sans-serif;\n  width: 98.6%;\n  border: 1px solid #cccccc;\n}\n\n.modal-title {\n  font-family: sans-serif;\n  font-size: 20px;\n  font-weight: 500;\n  text-transform: none;\n  margin-bottom: 6px;\n}\n\n.modal-message {\n  font-family: sans-serif;\n  font-size: 16px;\n  font-weight: 400;\n  margin-bottom: 10px;\n  text-transform: none;\n}\n\n.modal-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 24px;\n}\n\n.btn-confirm {\n  font-size: 14px;\n  padding: 5px;\n  text-transform: uppercase;\n  border: 1px solid black;\n}\n\n/* .btn-confirm:hover {\n  background-color: #f3f4f6;\n} */\n\n.btn-cancel {\n  font-size: 14px;\n  padding: 5px;\n  text-transform: uppercase;\n  border: 1px solid black;\n}\n\n/* .btn-cancel:hover {\n  background-color: #f3f4f6;\n} */\n\n.addNewCardButton {\n  background-color: #f9f9f9;\n  color: #181818;\n  padding: 18px;\n  text-align: center;\n  font-size: 14px;\n  width: 100%;\n  box-shadow: none;\n  font-family: sans-serif;\n  text-decoration: underline;\n}\n\n.addNewCardButton:hover {\n  background-color: #f9f9f9;\n  cursor: pointer;\n  color: #1a1a1a; /* darker shade */\n  font-weight: bold; /* bold */\n  text-decoration: underline;\n}\n\n.addNewCardButton.active {\n  color: #1a1a1a;       /* darker text when expanded */\n  font-weight: 600;     /* bold when expanded */\n}\n\nbody.modal-open .spreedlyCardDetailsSection,\nbody.modal-open .formActionButtons {\n  display: none;\n}\n\n.spreedlyExpiryDateCVVSection > div:first-child {\n  width: 248px;\n}\n\n.spreedlyExpiryDateCVVErrorSection > div:first-child {\n  width: 248px;\n}\n',""]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var p=n(u),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=o(f,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}i.push(u)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=r(e,o),l=0;l<a.length;l++){var d=n(a[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=c}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},883:t=>{t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,exports:{}};return t[e](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0;var o={};r.r(o),r.d(o,{default:()=>Oe});var a={ACH:"ACH",CREDIT_CARD:"CreditCard",APM:"APM"},i="Credit Card Number",s="Make sure the month and year are correct.",c=r(72),l=r.n(c),d=r(825),u=r.n(d),p=r(659),f=r.n(p),m=r(56),y=r.n(m),h=r(540),v=r.n(h),b=r(113),g=r.n(b),E=r(626),x={};x.styleTagTransform=g(),x.setAttributes=y(),x.insert=f().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=v(),l()(E.A,x),E.A&&E.A.locals&&E.A.locals;var S=r(883),C=r.n(S);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}function N(e,t,n){return t=M(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],M(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var R=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=N(this,t,[e])).state={isSubmitDisabled:!1},n.onClickCancelHandler=n.onClickCancelHandler.bind(n),n.onClickPayNowHandler=n.onClickPayNowHandler.bind(n),n.onChangeRoutingNumberField=n.onChangeRoutingNumberField.bind(n),n.onChangeAccountNumberField=n.onChangeAccountNumberField.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),n=t,r=[{key:"onChangeAccountNumberField",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");this.setState({accountNumber:t})}},{key:"onChangeRoutingNumberField",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");this.setState({routingNumber:t})}},{key:"componentDidMount",value:function(){}},{key:"onClickPayNowHandler",value:function(){try{this.setState({isSubmitDisabled:!0});var e=function(e){return function(e){var t=document.getElementById(e);return t&&t.value&&""!=t.value?(t.style.border="1px solid #cccccc",!0):(t.style.border="1px solid red",!1)}(e)?document.getElementById(e).value:null},t=e("bank-account-number"),n=e("routing-number"),r=e("account-holder-first-name"),o=e("account-holder-last-name"),a=e("account-type");if(t&&n&&r&&o&&a){var i=btoa(r+"|"+o+"|"+a+"|"+t+"|"+n);this.props.setClientResponse({paymentToken:i}),this.props.setInitiatePlaceOrderAction(!0)}else this.setState({isSubmitDisabled:!1})}catch(e){this.props.setErrorResponse({error:String(e),hasError:!0})}}},{key:"onClickCancelHandler",value:function(){this.props.setInitiateCancelAction(!0)}},{key:"render",value:function(){var e,t,n,r;return C().createElement("div",{className:"achModalSection"},C().createElement("h2",{className:"achModalTitle separator-sm"},"Bank Details"),C().createElement("form",{id:"ach-form"},C().createElement("section",{className:"achCardDetailsSection mt-3"},C().createElement("section",{className:"spreedly-achNameSection"},C().createElement("div",null,C().createElement("label",{className:"achFormLabel",htmlFor:"accountHolderFirstName","data-test-selector":"lblAccountHolderFirstName"},"First Name",C().createElement("span",{className:"requiredField"},"*")),C().createElement("input",{className:"achFormInput",placeholder:"First Name",id:"account-holder-first-name"})),C().createElement("div",null,C().createElement("label",{className:"achFormLabel",htmlFor:"accountHolderLastName","data-test-selector":"lblAccountHolderLastName"},"Last Name",C().createElement("span",{className:"requiredField"},"*")),C().createElement("input",{className:"achFormInput",placeholder:"Last Name",id:"account-holder-last-name"}))),C().createElement("div",null,C().createElement("label",{className:"achFormLabel",htmlFor:"accountType","data-test-selector":"lblAccountType"},"Account Type",C().createElement("span",{className:"requiredField"},"*")),C().createElement("select",{id:"account-type",className:"achAccountType",name:"bank_account_type",style:{}},C().createElement("option",{value:"",disabled:!0,selected:!0},"Select type"),C().createElement("option",{value:"checking"},"Checking"),C().createElement("option",{value:"savings"},"Savings"))),C().createElement("div",null,C().createElement("label",{className:"achFormLabel",htmlFor:"bankAccountNumber","data-test-selector":"lblBankAccountNumber"},"Bank Account Number",C().createElement("span",{className:"requiredField"},"*")),C().createElement("input",{className:"achFormInput",placeholder:"Account Number ",id:"bank-account-number",maxLength:12,value:null!==(e=null===(t=this.state)||void 0===t?void 0:t.accountNumber)&&void 0!==e?e:"",onChange:this.onChangeAccountNumberField})),C().createElement("div",null,C().createElement("label",{className:"achFormLabel",htmlFor:"Routing Number","data-test-selector":"lblRoutingNumber"},"Routing Number",C().createElement("span",{className:"requiredField"},"*")),C().createElement("input",{className:"achFormInput",placeholder:"",id:"routing-number",maxLength:9,value:null!==(n=null===(r=this.state)||void 0===r?void 0:r.routingNumber)&&void 0!==n?n:"",onChange:this.onChangeRoutingNumberField}))),C().createElement("section",{className:"formActionButtons"},C().createElement("button",{className:"btnPaymentSubmit btn btn-primary btn-text btn-text-secondary",id:"submit-payment",type:"button",onClick:this.onClickPayNowHandler,disabled:this.state.isSubmitDisabled},"Submit Payment"),C().createElement("button",{className:"btnPaymentCancel btn btn-primary btn-text btn-text-secondary",id:"cancel-payment",type:"button",onClick:this.onClickCancelHandler},"Cancel Payment"))))}}],r&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C().Component);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function j(e,t,n){return t=_(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,V()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function A(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}var D=function(e){function t(e){var n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=n=j(this,t,[e]),a=function(e){n.setState({saveCreditCard:e.target.checked})},(o=A(o="onChangeSaveCreditCard"))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n.state={month:"",year:"",saveCreditCard:!1},n.onChangeMonthField=n.onChangeMonthField.bind(n),n.onChangeYearField=n.onChangeYearField.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,r=[{key:"onChangeMonthField",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");this.setState({month:t})}},{key:"onChangeYearField",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");this.setState({year:t})}},{key:"render",value:function(){return C().createElement("form",null,C().createElement("section",{className:"spreedlyCardDetailsSection mt-3"},C().createElement("div",null,C().createElement("label",{className:"spreedlyFormLabel",htmlFor:"cardHolderName","data-test-selector":"lblCardHolderName"},"Cardholder Name",C().createElement("span",{className:"requiredField"},"*")),C().createElement("input",{className:"spreedlyFormInput",placeholder:"Cardholder Name",id:"card_holder_name"}),C().createElement("span",{id:"cardHolderNameError"})),C().createElement("div",null,C().createElement("label",{className:"spreedlyFormLabel",htmlFor:"creditCardNumber"},i,C().createElement("span",{className:"requiredField"},"*")),C().createElement("div",{id:"spreedly-number",style:{maxHeight:"55px"}}),C().createElement("span",{id:"cardNumberErrorField"})),C().createElement("section",{className:"spreedlyExpiryDateCVVSection"},C().createElement("div",null,C().createElement("label",{className:"spreedlyFormLabel",htmlFor:"expirationDate"},"Expiration Date",C().createElement("span",{className:"requiredField"},"*")),C().createElement("div",{className:"spreedlyExpirationDateSection"},C().createElement("div",null,C().createElement("input",{className:"spreedlyFormInput",type:"text",id:"month",size:3,maxLength:2,placeholder:"MM",value:this.state.month,onChange:this.onChangeMonthField}),C().createElement("span",{className:""}," /")),C().createElement("div",{className:"inline-block"},C().createElement("input",{className:"spreedlyFormInput",type:"text",id:"year",size:5,maxLength:4,placeholder:"YYYY",value:this.state.year,onChange:this.onChangeYearField})))),C().createElement("div",null),C().createElement("div",null,C().createElement("label",{className:"spreedlyFormLabel",htmlFor:"cvv"},"CVV",C().createElement("span",{className:"requiredField"},"*")),C().createElement("div",{id:"spreedly-cvv",className:""}),!this.props.isCVVValid&&C().createElement("div",{className:"spreedlyErrorText"},this.props.cvvErrorMessage))),C().createElement("section",{className:"spreedlyExpiryDateCVVErrorSection"},C().createElement("div",null,C().createElement("span",{id:"errorMessageField"})),C().createElement("div",{className:"spreedlyCVVErrorField"},C().createElement("span",{id:"cvvErrorField"}))),!this.props.isGuestUser&&this.props.isEnableSaveCard&&C().createElement("div",{className:"p-2 flex"},C().createElement("input",{type:"checkbox",id:"SaveCreditCard","data-test-selector":"txtSaveCreditCard",checked:this.state.saveCreditCard,onChange:this.onChangeSaveCreditCard,style:{marginRight:"8px"}}),C().createElement("span",{"data-test-selector":"lblSaveCreditCard"},"Save this credit card for future use."))))}}],r&&F(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C().Component);function B(e){var t=e.onConfirm,n=e.onCancel,r=e.message,o=void 0===r?"Are you sure you want to delete this credit card?":r,a=e.confirmLabel,i=void 0===a?"Delete":a,s=e.cancelLabel,c=void 0===s?"Cancel":s;return C().createElement("div",{className:"modal-container"},C().createElement("div",{className:"modal-content"},C().createElement("p",{className:"modal-message"},o),C().createElement("div",{className:"modal-buttons"},C().createElement("button",{className:"btn-confirm btn btn-primary btn-text btn-text-secondary",onClick:t},i),C().createElement("button",{className:"btn-cancel btn btn-primary btn-text btn-text-secondary",onClick:n},c))))}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function z(e,t,n){return t=Y(t),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,G()?Reflect.construct(t,n||[],Y(e).constructor):t.apply(e,n))}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G=function(){return!!e})()}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function K(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(n=z(this,t,[e]),"openDeleteConfirmModal",(function(e){n.setState({showConfirmDeleteModal:!0,selectedDeleteToken:e},(function(){document.body.classList.add("modal-open")}))})),K(n,"closeDeleteConfirmModal",(function(){var e=n.state,t=e.paymentMethodIndex,r=e.selectedDeleteToken;e.showConfirmDeleteModal&&n.setState({showConfirmDeleteModal:!1,selectedDeleteToken:r},(function(){var e=n.props.savedPaymentMethods;if(t>=0&&t<e.length){var r="saved-card-number-".concat(t),o="saved-card-cvv-".concat(t);n.props.initSpreedly(n.props.clientToken,r,o),setTimeout((function(){return Spreedly.setRecache(e[t].paymentMethodToken,{card_type:e[t].cardType,last_four_digits:String(e[t].cardNumber)})}),200),n.props.setIsSavedPaymentMethod(!0),n.props.registerOnReadyEvent(!0),n.props.registerFieldEvent(!0)}else n.props.initSpreedly(n.props.clientToken,"spreedly-number","spreedly-cvv"),n.props.setIsSavedPaymentMethod(!1),n.props.registerOnReadyEvent(!1),n.props.registerFieldEvent(!1);document.body.classList.remove("modal-open")}))})),K(n,"confirmDelete",(function(){var e=n.state.selectedDeleteToken;e&&n.props.setInitiateDeleteSavedCard({paymentToken:e}),n.closeDeleteConfirmModal()})),K(n,"onClickToggleAccordion",(function(e,t){n.resetNewCardForm();var r=n.props.savedPaymentMethods;e.preventDefault(),n.props.registerRecacheReadyEvent();var o="saved-card-number-".concat(t),a="saved-card-cvv-".concat(t),i=!0;t==r.length+1?(o="spreedly-number",a="spreedly-cvv",n.props.initSpreedly(n.props.clientToken,o,a),i=!1):(n.props.initSpreedly(n.props.clientToken,o,a),setTimeout((function(){return Spreedly.setRecache(r[t].paymentMethodToken,{card_type:r[t].cardType,last_four_digits:String(r[t].cardNumber)})}),200)),n.props.setIsSavedPaymentMethod(i),n.props.registerOnReadyEvent(i),n.props.registerFieldEvent(i),n.setState((function(e){return{paymentMethodIndex:e.paymentMethodIndex===t?-1:t}}),(function(){n.props.setPaymentMethodIndex(n.state.paymentMethodIndex),-1===n.state.paymentMethodIndex?(n.props.setIsSavedPaymentMethod(!0),n.props.setSetIsSelectedSaveCreditCard(!1)):n.props.setSetIsSelectedSaveCreditCard(!0),n.props.setValidationMessage(null)}))})),n.state={paymentMethodIndex:-1,showConfirmDeleteModal:!1,selectedDeleteToken:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),n=t,(r=[{key:"onDeleteCard",value:function(e){this.props.setInitiateDeleteSavedCard({paymentToken:e})}},{key:"resetNewCardForm",value:function(){this.props.resetValidationState(),["card_holder_name","month","year"].forEach((function(e){var t=document.getElementById(e);t&&(t.value="",t.setAttribute("value",""),t.style.border="1px solid #cccccc")}));var e=document.getElementById("errorMessageField");e&&(e.innerHTML="",e.style.color="#cccccc")}},{key:"render",value:function(){var e=this;return this.state.showConfirmDeleteModal?C().createElement(B,{onConfirm:this.confirmDelete,onCancel:this.closeDeleteConfirmModal,title:"Please Confirm",message:"Are you sure you want to delete this credit card?",confirmLabel:"Delete",cancelLabel:"Cancel"}):C().createElement(C().Fragment,null,C().createElement("div",null,this.props.savedPaymentMethods.length>0&&this.props.savedPaymentMethods.map((function(t,n){return C().createElement("div",{key:n,id:"saved-payment-method-".concat(n)},C().createElement("div",{className:"accordion-header-row"},C().createElement("button",{onClick:function(t){return e.onClickToggleAccordion(t,n)},className:"spreedlyAccordion ".concat(e.state.paymentMethodIndex===n?"active":"")},"Pay with Card Ending with ",t.cardNumber),C().createElement("button",{onClick:function(){return e.openDeleteConfirmModal(t.paymentMethodToken)},className:"flex items-center deleteCardButton"},C().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"20",viewBox:"0 0 24 27",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash-icon lucide-trash"},C().createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),C().createElement("path",{d:"M3 6h18"}),C().createElement("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})))),C().createElement("div",{className:"panel",id:"saved-payment-panel-".concat(n),style:{maxHeight:e.state.paymentMethodIndex===n?"400px":"0",overflow:"hidden",transition:"max-height 0.3s ease-out"}},C().createElement("section",null,C().createElement("div",{className:"spreedly-saveCCNameSection"},C().createElement("div",null,C().createElement("label",{className:"saveCCFormLabel",htmlFor:"creditCardNumber"},i,C().createElement("span",{className:"requiredField"},"*")),C().createElement("div",{id:"saved-card-number-".concat(n),style:{maxHeight:"55px"}})),e.props.isCVVSkipped?C().createElement("div",{id:"saved-card-cvv-".concat(n),style:{display:"none"}}):C().createElement("div",null,C().createElement("label",{className:"saveCCFormLabel",htmlFor:"cvv"},"CVV",C().createElement("span",{className:"requiredField"},"*")),C().createElement("div",{id:"saved-card-cvv-".concat(n)}),!e.props.isCVVValid&&C().createElement("div",{className:"spreedlyErrorText"},e.props.cvvErrorMessage))))))}))),C().createElement("button",{onClick:function(t){return e.onClickToggleAccordion(t,e.props.savedPaymentMethods.length+1)},className:"spreedlyAccordion addNewCardButton ".concat(this.state.paymentMethodIndex===this.props.savedPaymentMethods.length+1?"active":"")},"Add a New Card"))}}])&&H(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C().Component);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function X(){X=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),s=new I(r||[]);return o(i,"_invoke",{value:P(e,n,s)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",f="suspendedYield",m="executing",y="completed",h={};function v(){}function b(){}function g(){}var E={};l(E,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(R([])));S&&S!==n&&r.call(S,i)&&(E=S);var C=g.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Q(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=N(s,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=u(t,n,r);if("normal"===l.type){if(o=r.done?y:f,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=u(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Q(t)+" is not iterable")}return b.prototype=g,o(C,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},w(k.prototype),l(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new k(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(C),l(C,c,"Generator"),l(C,i,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Z(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Z(a,r,o,i,s,"next",e)}function s(e){Z(a,r,o,i,s,"throw",e)}i(void 0)}))}}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function te(e,t,n){return t=re(t),function(e,t){if(t&&("object"==Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,n||[],re(e).constructor):t.apply(e,n))}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function ae(e,t,n){return(t=ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){var t=function(e){if("object"!=Q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}var se=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(r=te(this,t,[e]),"iframeRendered",!1),ae(r,"newCreditCardRef",(0,S.createRef)()),ae(r,"resetValidationState",(function(){var e;r.setState({isCVVValid:!1,cvvErrorMessage:"",isCardNumberValid:!1,isCardExpirationValid:!1,isCardHolderNameValid:!1,displayError:!1,month:"",year:"",isSubmitDisabled:!1}),document.getElementById("month").value="",document.getElementById("year").value="",null===(e=r.newCreditCardRef.current)||void 0===e||e.setState({month:"",year:"",saveCreditCard:!1})})),ae(r,"setValidationMessage",(function(e){r.setState({validationMessage:e})})),ae(r,"setSetIsSelectedSaveCreditCard",(function(e){r.setState({isSelectedSaveCreditCard:e})})),r.spreedlyScript=null,r.state={isCardExpirationValid:!1,isCVVValid:!1,cvvErrorMessage:"",isCardNumberValid:!1,isCardHolderNameValid:!1,displayError:!1,paymentMethodIndex:0,isSubmitDisabled:!1,isSavedPaymentMethod:Number(null===(n=r.props.paymentRequest.savedPaymentMethods)||void 0===n?void 0:n.length)>0,isSelectedSaveCreditCard:!1,validationMessage:null},r.onClickCancelHandler=r.onClickCancelHandler.bind(r),r.onClickPayNowHandler=r.onClickPayNowHandler.bind(r),r.onChangeMonthField=r.onChangeMonthField.bind(r),r.onChangeYearField=r.onChangeYearField.bind(r),r.setPaymentMethodIndex=r.setPaymentMethodIndex.bind(r),r.setIsSavedPaymentMethod=r.setIsSavedPaymentMethod.bind(r),r.registerOnReadyEvent=r.registerOnReadyEvent.bind(r),r.registerFieldEvent=r.registerFieldEvent.bind(r),r.registerRecacheReadyEvent=r.registerRecacheReadyEvent.bind(r),r.setInitiateDeleteSavedCard=r.setInitiateDeleteSavedCard.bind(r),r.resetValidationState=r.resetValidationState.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e),n=t,r=[{key:"registerPaymentMethodEvent",value:(o=$(X().mark((function e(){var t,n,r=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=$(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.props.setClientResponse({paymentToken:t}),r.props.setInitiatePlaceOrderAction(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=$(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.props.setErrorResponse({error:"Invalid payment method token",hasError:!0});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Spreedly.on("paymentMethod",function(){var e=$(X().mark((function e(r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==r){e.next=5;break}return e.next=3,t(r);case 3:e.next=6;break;case 5:n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"registerErrorEvent",value:function(){var e=this,t=function(){var t=$(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.setErrorResponse({error:n,hasError:!0}),Spreedly.reload();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=$(X().mark((function t(n){var r,o,a;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=document.getElementById("errorMessageField")).innerText=s,r.style.color="red",o=document.getElementById("month"),a=document.getElementById("year"),o.style.border="1px solid red",a.style.border="1px solid red",e.setState({isCardExpirationValid:!1,isSubmitDisabled:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Spreedly.on("errors",(function(e){var r="";e.forEach((function(e){"year"===e.attribute&&"errors.invalid"===e.key&&n(e),r&&(r+=e.message+"<br/>")})),""!=r&&t(r)}))}},{key:"registerOnReadyEvent",value:function(e){var t=Boolean(e)?60:98.3;Spreedly.on("ready",(function(e){Spreedly.setFieldType("cvv","text"),Spreedly.setFieldType("number","text"),Spreedly.setNumberFormat("prettyFormat"),Spreedly.setStyle("number","width: ".concat(t,"%; border-radius: 5px; border: 1px solid #cccccc; padding: 4px;outline:none;height:30px;margin-bottom:15px;")),Spreedly.setStyle("cvv","width: 15%; border-radius: 5px; border: 1px solid #cccccc; padding: 4px;height:30px; font-size: 91%;")}))}},{key:"validateSavedCardCVV",value:function(){var e=this.state.isCVVValid;return e?(this.setState({isSubmitDisabled:!0}),Spreedly.setStyle("cvv","border: 1px solid #cccccc")):(this.setState({isSubmitDisabled:!1}),Spreedly.setStyle("cvv","border: 1px solid red")),e}},{key:"registerRecacheReadyEvent",value:function(){var e=this,t=function(){var t=$(X().mark((function t(n){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.setClientResponse({paymentToken:n}),e.props.setInitiatePlaceOrderAction(!0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=$(X().mark((function t(){return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.setErrorResponse({error:"Invalid payment method token",hasError:!0});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Spreedly.on("recache",function(){var e=$(X().mark((function e(r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==r){e.next=6;break}return e.next=3,t(r);case 3:Spreedly.setStyle("cvv","border: 1px solid #cccccc"),e.next=7;break;case 6:n();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"setInitiateDeleteSavedCard",value:function(e){this.props.setInitiateDeleteSavedCard({paymentToken:e})}},{key:"registerFieldEvent",value:function(e){var t=this;Spreedly.on("fieldEvent",(function(n,r,o,a){t.validateCard(r,n,o,a,e)}))}},{key:"validateCard",value:function(e,t,n,r,o){var a,i;["input"].includes(e)&&("cvv"===t&&("american_express"===(null==(a=r)||null===(i=a.cardType)||void 0===i?void 0:i.toLowerCase())&&4!==a.cvvLength?this.setState({isCVVValid:!1,cvvErrorMessage:"Please enter a valid CVV"}):this.setState({isCVVValid:a.validCvv,cvvErrorMessage:""})),o||"number"!==n||this.setState({isCardNumberValid:r.validNumber}))}},{key:"InitSpreedly",value:function(e,t,n){try{Spreedly?Spreedly.init(e,{numberEl:t,cvvEl:n}):this.props.setErrorResponse({error:"Spreedly library not defined",hasError:!0})}catch(e){this.props.setErrorResponse({error:String(e),hasError:!0})}}},{key:"validateCardExpiration",value:function(e){var t=document.getElementById("month").value,n=document.getElementById("year").value,r=Number(Number((new Date).getMonth().toString())+1),o=Number((new Date).getFullYear().toString());return""==t||""==n?(this.setState({isCardExpirationValid:!1}),e(),!1):Number(n)>o?Number(t)<=12?(this.setState({isCardExpirationValid:!0}),!0):(this.setState({isCardExpirationValid:!1}),e(),!1):Number(n)==o&&Number(t)<=12&&Number(t)>=r?(this.setState({isCardExpirationValid:!0}),!0):(this.setState({isCardExpirationValid:!1}),e(),!1)}},{key:"validateCardHolderName",value:function(){var e=document.getElementById("card_holder_name"),t=e.value.split(" ").filter((function(e){return""!=e})),n=document.getElementById("cardHolderNameError");return t.length>1?(e.style.border="1px solid #cccccc",n.innerText="",n.style.color="",this.setState({isCardHolderNameValid:!0}),!0):(e.style.border="1px solid red",n.innerText="Full name required.",n.style.color="red",this.setState({isCardHolderNameValid:!1}),!1)}},{key:"validateCardDetails",value:function(){var e,t;this.state.isCVVValid?(Spreedly.setStyle("cvv","border: 1px solid #cccccc"),function(){var e=document.getElementById("cvvErrorField");e.innerText="",e.style.color="#cccccc"}()):(Spreedly.setStyle("cvv","border: 1px solid red"),(e=document.getElementById("cvvErrorField")).innerText="Valid CVV number required.",e.style.color="red"),this.state.isCardNumberValid?(Spreedly.setStyle("number","border: 1px solid #cccccc"),function(){var e=document.getElementById("cardNumberErrorField");e.innerText="",e.style.color="#cccccc"}()):(Spreedly.setStyle("number","border: 1px solid red"),(t=document.getElementById("cardNumberErrorField")).innerText="Please enter a valid credit card number.",t.style.color="red");var n,r=this.validateCardExpiration((function(){var e=document.getElementById("errorMessageField");e.innerText=s,e.style.color="red"}));if(r){(n=document.getElementById("errorMessageField")).innerText="",n.style.color="#cccccc";var o=document.getElementById("month"),a=document.getElementById("year");o.style.border="1px solid #cccccc",a.style.border="1px solid #cccccc"}else{var i=document.getElementById("month"),c=document.getElementById("year");i.style.border="1px solid red",c.style.border="1px solid red"}var l=this.validateCardHolderName();return!!(this.state.isCVVValid&&r&&this.state.isCardNumberValid&&l)}},{key:"createPaymentRequest",value:function(){for(var e="1px solid #cccccc",t={},n=0,r=["month","year","address1","address2","city","state","zip","country","card_holder_name","SaveCreditCard"];n<r.length;n++){var o=r[n];if("month"===o||"year"===o){var a=document.getElementById(o);a&&""!=a.value&&(a.style.border=e,t[o]=a.value)}else if("card_holder_name"===o){t.first_name="",t.last_name="";var i=document.getElementById(o);if(i){var s=i.value.split(" ").filter((function(e){return""!=e}));i.style.border=e,1===s.length?(t.first_name=s[0],t.last_name=""):(t.first_name=s[0],t.last_name=s[s.length-1])}}else if("SaveCreditCard"===o){var c=document.getElementById(o);c&&(t.is_save_cc=String(c.checked))}else this.setBillingAddressDetails(o,t)}return Spreedly.setStyle("number","border: "+e+";"),Spreedly.setStyle("cvv","border: "+e+";"),t}},{key:"setBillingAddressDetails",value:function(e,t){"address1"==e&&(t[e]=this.props.paymentRequest.billingAddress.addressLine1),"address2"==e&&(t[e]=this.props.paymentRequest.billingAddress.addressLine2),"city"==e&&(t[e]=this.props.paymentRequest.billingAddress.city),"state"==e&&(t[e]=this.props.paymentRequest.billingAddress.state),"zip"==e&&(t[e]=this.props.paymentRequest.billingAddress.zipCode),"country"==e&&(t[e]=this.props.paymentRequest.billingAddress.country)}},{key:"onChangeMonthField",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");this.setState({month:t})}},{key:"onChangeYearField",value:function(e){var t=e.target.value.replace(/[^0-9]/g,"");this.setState({year:t})}},{key:"onClickPayNowHandler",value:function(){try{if(this.props.setIsSavedPayment(!1),this.setState({isSubmitDisabled:!0}),!this.state.isSavedPaymentMethod&&this.validateCardDetails()){var e=this.createPaymentRequest();e&&"true"===(null==e?void 0:e.is_save_cc)&&this.props.setIsSaveCreditCard(!0),Spreedly.tokenizeCreditCard(e)}else if(this.state.isSavedPaymentMethod||-1===this.state.paymentMethodIndex)if(this.props.setIsSavedPayment(!0),this.props.paymentRequest.isSkipCVVForSavedCards&&this.state.isSelectedSaveCreditCard&&-1!==this.state.paymentMethodIndex){var t=this.props.paymentRequest.savedPaymentMethods[this.state.paymentMethodIndex].paymentMethodToken;this.props.setClientResponse({paymentToken:t}),this.props.setInitiatePlaceOrderAction(!0),this.setState({isSubmitDisabled:!0})}else this.state.isSelectedSaveCreditCard||-1!==this.state.paymentMethodIndex&&0!==this.state.paymentMethodIndex?this.validateSavedCardCVV()?Spreedly.recache():this.setState({isSubmitDisabled:!1}):(this.setState({validationMessage:"Please select a saved card to continue or add a new card."}),this.setState({isSubmitDisabled:!1}));else this.setState({isSubmitDisabled:!1}),this.setSetIsSelectedSaveCreditCard(!1),this.setState({validationMessage:null})}catch(e){this.props.setErrorResponse({error:String(e),hasError:!0})}}},{key:"onClickCancelHandler",value:function(){this.props.setInitiateCancelAction(!0)}},{key:"setPaymentMethodIndex",value:function(e){this.setState({paymentMethodIndex:e})}},{key:"setIsSavedPaymentMethod",value:function(e){this.setState({isSavedPaymentMethod:e})}},{key:"componentDidMount",value:function(){var e=this;!this.iframeRendered&&this.props.clientToken&&(this.iframeRendered=!0,this.spreedlyScript=document.createElement("script"),this.spreedlyScript.src="https://core.spreedly.com/iframe/iframe-v1.min.js",this.spreedlyScript.async=!0,document.head.appendChild(this.spreedlyScript),this.spreedlyScript.onload=function(){var t=e.props.paymentRequest.savedPaymentMethods,n=e.state.paymentMethodIndex,r=!1;Number(null==t?void 0:t.length)>0?(e.setState({isSavedPaymentMethod:!0}),Spreedly.init(e.props.clientToken,{numberEl:"saved-card-number-".concat(n),cvvEl:"saved-card-cvv-".concat(n)}),Spreedly.on("ready",(function(){Spreedly.on("fieldEvent",(function(t,n,r,o){return e.validateCard(n,t,r,o,!0)}))})),setTimeout((function(){return Spreedly.setRecache(t[n].paymentMethodToken,{card_type:t[n].cardType,last_four_digits:String(t[n].cardNumber)})}),200),r=!0):(e.InitSpreedly(e.props.clientToken,"spreedly-number","spreedly-cvv"),r=!1),e.registerFieldEvent(r),e.registerOnReadyEvent(r),e.registerPaymentMethodEvent(),e.registerRecacheReadyEvent(),e.registerErrorEvent()})}},{key:"renderValidationMessage",value:function(){var e=this.state,t=e.isSelectedSaveCreditCard,n=e.validationMessage;return!t&&n?C().createElement("div",{className:"spreedlyErrorText"},n):null}},{key:"render",value:function(){var e,t;return C().createElement("div",{className:"spreedlyModalSection"},C().createElement("h2",{className:"spreedlyModalTitle separator-sm"},"Pay and Submit"),(!Array.isArray(null===(e=this.props.paymentRequest)||void 0===e?void 0:e.savedPaymentMethods)||0===this.props.paymentRequest.savedPaymentMethods.length||null==this.props.paymentRequest.savedPaymentMethods)&&C().createElement(D,{ref:this.newCreditCardRef,isGuestUser:this.props.paymentRequest.isGuestUser,isCVVValid:this.state.isCVVValid,isEnableSaveCard:this.props.paymentRequest.isEnableSaveCard,cvvErrorMessage:this.state.cvvErrorMessage,gatewayType:this.props.paymentRequest.gatewayType}),(null===(t=this.props.paymentRequest.savedPaymentMethods)||void 0===t?void 0:t.length)>0&&C().createElement(C().Fragment,null,C().createElement(J,{savedPaymentMethods:this.props.paymentRequest.savedPaymentMethods,setIsSavedPaymentMethod:this.setIsSavedPaymentMethod,clientToken:this.props.clientToken,setPaymentMethodIndex:this.setPaymentMethodIndex,registerOnReadyEvent:this.registerOnReadyEvent,registerFieldEvent:this.registerFieldEvent,registerRecacheReadyEvent:this.registerRecacheReadyEvent,initSpreedly:this.InitSpreedly,setInitiateDeleteSavedCard:this.setInitiateDeleteSavedCard,isCVVValid:this.state.isCVVValid,cvvErrorMessage:this.state.cvvErrorMessage,resetValidationState:this.resetValidationState,isCVVSkipped:this.props.paymentRequest.isSkipCVVForSavedCards,gatewayType:this.props.paymentRequest.gatewayType,setSetIsSelectedSaveCreditCard:this.setSetIsSelectedSaveCreditCard,setValidationMessage:this.setValidationMessage}),C().createElement("div",{className:"panel",id:"saved-payment-panel-".concat(this.props.paymentRequest.savedPaymentMethods.length+1),style:{maxHeight:this.state.paymentMethodIndex===this.props.paymentRequest.savedPaymentMethods.length+1?"400px":"0",overflow:"hidden",transition:"max-height 0.3s ease-out"}},C().createElement(D,{ref:this.newCreditCardRef,isGuestUser:this.props.paymentRequest.isGuestUser,isEnableSaveCard:this.props.paymentRequest.isEnableSaveCard,isCVVValid:this.state.isCVVValid,cvvErrorMessage:this.state.cvvErrorMessage,gatewayType:this.props.paymentRequest.gatewayType}))),this.renderValidationMessage(),C().createElement("section",{className:"formActionButtons"},C().createElement("button",{className:"btnPaymentSubmit btn btn-primary btn-text btn-text-secondary",id:"submit-payment",type:"button",onClick:this.onClickPayNowHandler,disabled:this.state.isSubmitDisabled}," ","Submit Payment"),C().createElement("button",{className:"btnPaymentCancel btn btn-primary btn-text btn-text-secondary",id:"cancel-payment",type:"button",onClick:this.onClickCancelHandler}," ","Cancel Payment")))}}],r&&ee(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(C().Component);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function le(){le=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),s=new I(r||[]);return o(i,"_invoke",{value:P(e,n,s)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",f="suspendedYield",m="executing",y="completed",h={};function v(){}function b(){}function g(){}var E={};l(E,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(R([])));S&&S!==n&&r.call(S,i)&&(E=S);var C=g.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==ce(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=N(s,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=u(t,n,r);if("normal"===l.type){if(o=r.done?y:f,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=u(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ce(t)+" is not iterable")}return b.prototype=g,o(C,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},w(k.prototype),l(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new k(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(C),l(C,c,"Generator"),l(C,i,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function de(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){de(a,r,o,i,s,"next",e)}function s(e){de(a,r,o,i,s,"throw",e)}i(void 0)}))}}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,be(r.key),r)}}function fe(e,t,n){return t=ye(t),function(e,t){if(t&&("object"==ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,me()?Reflect.construct(t,n||[],ye(e).constructor):t.apply(e,n))}function me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(me=function(){return!!e})()}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ve(e,t,n){return(t=be(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}ae(se,"defaultProps",{setIsSavedPayment:function(){}});var ge=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ve(n=fe(this,t,[e]),"spreedlyElement",null),ve(n,"timeoutIds",[]),ve(n,"rafIds",[]),ve(n,"initializeAffirm",ue(le().mark((function e(){var t,r,o,a;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([Ee("https://core.spreedly.com/iframe/iframe-v1.min.js"),Ee("https://js.stripe.com/v3/")]);case 3:return e.next=5,n.waitForGlobals();case 5:if((o=null===(t=window.Spreedly)||void 0===t?void 0:t.createStripePaymentElement({publishableKey:n.props.publishableKey,clientSecret:n.props.clientSecret,transactionToken:n.props.transactionToken,paymentElement:"#payment-element",appearance:{variables:{colorPrimary:"#000000"}}}))&&!o.error){e.next=8;break}throw new Error((null==o||null===(r=o.error)||void 0===r?void 0:r.message)||"Element failed");case 8:n.spreedlyElement=o,n.waitForIframeAndRedirect(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),a=e.t0 instanceof Error?e.t0.message:"Failed to load Affirm",n.setState({loading:!1,error:a});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))),ve(n,"waitForGlobals",(function(){return new Promise((function(e,t){var r=setTimeout((function(){t(new Error("Failed to load Spreedly and Stripe libraries"))}),5e3),o=function(){if(window.Spreedly&&window.Stripe)clearTimeout(r),e();else{var t=setTimeout(o,100);n.timeoutIds.push(t)}};o()}))})),ve(n,"waitForIframeAndRedirect",(function(){var e=document.getElementById("payment-element");if(e){var t=function(){if(e.querySelector("iframe")&&!n.state.hasRedirected){n.setState({hasRedirected:!0});var r=setTimeout((function(){n.setState({loading:!1,redirecting:!0},(function(){var e;null===(e=n.spreedlyElement)||void 0===e||e.confirmPayment({redirect:"if_required"}).then((function(){})).catch((function(e){if(n.state.hasRedirected){var t=e instanceof Error?e.message:"Unknown error";n.setState({redirecting:!1,error:"Payment confirmation failed: "+t})}}))}))}),600);n.timeoutIds.push(r)}else if(!n.state.hasRedirected){var o=requestAnimationFrame(t);n.rafIds.push(o)}},r=requestAnimationFrame(t);n.rafIds.push(r);var o=setTimeout((function(){n.state.loading&&!n.state.hasRedirected&&n.setState({loading:!1,error:"Payment element took too long to load"})}),12e3);n.timeoutIds.push(o)}else n.setState({loading:!1,error:"Payment element container not found"})})),n.state={loading:!0,redirecting:!1,error:null,hasRedirected:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.clientSecret,n=e.transactionToken,r=e.publishableKey;t&&n&&r?this.initializeAffirm():this.setState({loading:!1,error:"Missing required payment props"})}},{key:"componentWillUnmount",value:function(){this.timeoutIds.forEach((function(e){return clearTimeout(e)})),this.rafIds.forEach((function(e){return cancelAnimationFrame(e)})),this.timeoutIds=[],this.rafIds=[],this.spreedlyElement&&"function"==typeof this.spreedlyElement.destroy&&this.spreedlyElement.destroy()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error;return n?C().createElement("div",{style:{padding:40,textAlign:"center",color:"red"}},C().createElement("strong",null,"Affirm Error:")," ",n):C().createElement("div",{style:{padding:30,textAlign:"center"}},C().createElement("h3",{style:{marginBottom:16}},t?"Loading Affirm...":"Redirecting to Affirm..."),C().createElement("p",{style:{color:"#666",marginBottom:30}},t?"Setting up secure financing...":"You'll be transferred in a moment"),C().createElement("div",{style:{border:"5px solid #f0f0f0",borderTop:"5px solid #000",borderRadius:"50%",width:50,height:50,animation:"spin 1s linear infinite",margin:"0 auto 30px"}}),C().createElement("div",{id:"payment-element",style:{minHeight:"300px",width:"100%"}}),C().createElement("style",{jsx:!0},"\n                         @keyframes spin {\n                              to {\n                                   transform: rotate(360deg);\n                              }\n                         }\n                    "))}}])&&pe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C().Component),Ee=function(e){return new Promise((function(t,n){if(document.querySelector('script[src="'.concat(e,'"]')))return t();var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){return t()},r.onerror=function(){return n(new Error("Failed to load ".concat(e)))},document.head.appendChild(r)}))};function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ce(r.key),r)}}function Ce(e){var t=function(e){if("object"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:t+""}function we(e,t,n){return t=Pe(t),function(e,t){if(t&&("object"==xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ke()?Reflect.construct(t,n||[],Pe(e).constructor):t.apply(e,n))}function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}const Oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),we(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return C().createElement(C().Fragment,null,this.props.paymentRequest&&this.props.paymentRequest.paymentMethodType.toLowerCase()===a.CREDIT_CARD.toLowerCase()&&C().createElement(se,{clientToken:this.props.clientToken,setClientResponse:this.props.setClientResponse,setErrorResponse:this.props.setErrorResponse,setInitiateCancelAction:this.props.setInitiateCancelAction,setInitiatePlaceOrderAction:this.props.setInitiatePlaceOrderAction,setIsSaveCreditCard:this.props.setIsSaveCreditCard,setIsSavedPayment:this.props.setIsSavedPayment,paymentRequest:this.props.paymentRequest,setInitiateDeleteSavedCard:this.props.setInitiateDeleteSavedCard}),this.props.paymentRequest&&this.props.paymentRequest.paymentMethodType.toLowerCase()===a.ACH.toLowerCase()&&C().createElement(R,{setClientResponse:this.props.setClientResponse,setErrorResponse:this.props.setErrorResponse,setInitiateCancelAction:this.props.setInitiateCancelAction,setInitiatePlaceOrderAction:this.props.setInitiatePlaceOrderAction}),this.props.paymentRequest&&this.props.paymentRequest.paymentMethodType.toLowerCase()===a.APM.toLowerCase()&&C().createElement(ge,{clientSecret:this.props.clientSecret,transactionToken:this.props.transactionToken,publishableKey:this.props.publishableKey}))}}])&&Se(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(C().Component);return o})()));